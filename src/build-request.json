{
  "kind": "build_request",
  "title": "Fix Day 1 navigation/progress loading, workout timer seconds, and exercise video playback",
  "projectName": "Six Pack Challenge",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-15",
      "text": "Prevent Day Details (including Day 1) from failing to load when the user is not signed in by ensuring progress-related React Query requests are disabled unless the user is authenticated, and show the Day Details content without completion badges when unauthenticated.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Sun day 1 pay to ho ni rha na hi secand chl rhe na hi video fix it"
        ]
      },
      "acceptanceCriteria": [
        "When signed out, opening /day/1 renders the workout title, description, and exercise list without crashing or showing an error screen.",
        "When signed out, no backend calls that require authorization are attempted for day progress (e.g., getDayProgress) and the UI does not show a completed badge.",
        "When signed in, Day Details still shows the completion badge correctly based on saved progress."
      ]
    },
    {
      "id": "REQ-16",
      "text": "Prevent the Program page from triggering unauthorized progress calls when signed out by gating the 'my progress' query on authentication and keeping the schedule browsable for unauthenticated users.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Sun day 1 pay to ho ni rha na hi secand chl rhe na hi video fix it"
        ]
      },
      "acceptanceCriteria": [
        "When signed out, visiting /program renders the 30-day schedule without crashing and without attempting to call getMyProgress.",
        "When signed in, /program shows completion indicators correctly using the user’s saved progress."
      ]
    },
    {
      "id": "REQ-17",
      "text": "Fix the workout runner countdown timer so seconds decrement reliably and reset correctly whenever the current exercise changes (e.g., when moving from the first timed exercise to the next exercise/rest).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Sun day 1 pay to ho ni rha na hi secand chl rhe na hi video fix it"
        ]
      },
      "acceptanceCriteria": [
        "On a timed or rest exercise in /workout/1, pressing Start decreases the displayed seconds every second until it reaches 0.",
        "Switching to a different timed/rest exercise updates the timer to that exercise’s duration (and stops the previous timer).",
        "The timer does not keep counting from a previous exercise’s remaining time after navigating Previous/Next or selecting an exercise from the list."
      ]
    },
    {
      "id": "REQ-18",
      "text": "Fix exercise demo video playback so videos referenced via `videoSrc` load and play consistently, and provide a clear in-UI fallback when a video file is missing or fails to load.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Sun day 1 pay to ho ni rha na hi secand chl rhe na hi video fix it"
        ]
      },
      "acceptanceCriteria": [
        "On Day 1 (Day Details and Workout Runner), exercises that have a `videoSrc` render a visible video player and the user can press play to view the demo.",
        "If a video fails to load (e.g., 404 or decoding error), the UI shows an English fallback state (not a blank area), and does not break page layout.",
        "If an exercise has both `videoSrc` and `imageSrc`, the app still prioritizes the video, but can fall back gracefully if the video errors."
      ]
    }
  ],
  "constraints": [
    "Use English for any user-facing text.",
    "Do not edit frontend immutable paths: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui.",
    "Backend remains single-actor (all Motoko logic in backend/main.mo); only add migration.mo if a state schema upgrade is required."
  ],
  "nonGoals": [
    "Adding new workout days or changing the 30-day plan content beyond what is necessary to fix Day 1 loading.",
    "Adding real-time syncing for timers or exercise progress updates.",
    "Adding new authentication methods (mobile number, Gmail) beyond the existing Internet Identity flow."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}